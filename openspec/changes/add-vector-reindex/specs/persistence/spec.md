## ADDED Requirements

### Requirement: 向量索引重建能力
系统MUST提供显式的向量索引重建能力，用于在配置变更或修复错误后，对项目的文本记忆向量进行重建。

#### Scenario: 项目级向量索引重建
- **WHEN** 开发者通过 CLI 命令或工具函数请求对某个项目执行向量索引重建
- **THEN** 系统 MUST 加载该项目的配置和 embedding 配置
- **AND** MUST 删除该项目在向量库中的所有相关记忆向量
- **AND** MUST 从持久化存储（例如数据库 memory_chunks 表或章节 JSON 文件）中重新加载该项目的源文本
- **AND** MUST 按当前的分块策略和 embedding 配置重新生成并写入向量
- **AND** MUST 在完成后输出或返回重建的统计信息（例如重建的记忆块数量）

#### Scenario: 章节级向量索引重建
- **WHEN** 开发者通过 CLI 命令或工具函数请求对某个项目的指定章节执行向量索引重建
- **THEN** 系统 MUST 仅删除该章节在向量库中的记忆向量
- **AND** MUST 从持久化存储中仅加载该章节对应的源文本
- **AND** MUST 按当前的分块策略和 embedding 配置重新生成并写入该章节的向量
- **AND** MUST 确保其他章节的向量数据不受影响

#### Scenario: 重建失败与降级处理
- **WHEN** 向量索引重建过程中发生不可恢复错误（例如 Chroma 不可用或 embedding 调用持续失败）
- **THEN** 系统 MUST 停止当前重建操作并输出清晰的错误信息
- **AND** MUST 不修改尚未被标记为重建目标的项目或章节向量数据
- **AND** SHOULD 保持数据库和现有项目文件不被破坏

#### Scenario: 与现有生成流程的兼容性
- **WHEN** 用户未显式调用任何向量索引重建命令
- **THEN** 系统 MUST 保持现有的生成和持久化行为不变
- **AND** MUST 不因为新增的重建能力而改变章节生成、修订和记忆写入的默认流程
